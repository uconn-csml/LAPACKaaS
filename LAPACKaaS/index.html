<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>SignalR-based Dot Product Web Service </title>
    <!--by Yong-Jun Shin, UCONN CSML csml.uconn.edu (2015) -->
</head>
<body>
    <!--User interface -->
    <p> SignalR-based Dot Product Web Service  </p>
    <p>Matrix #1 <input type="text" id="mat1" size="150" value="{&quot;matrixType&quot;:&quot;RowVector&quot;, &quot;data&quot;: [[1,1,1,1]], &quot;size&quot;: [1, 4]}"/> </p>
    <p>Matrix #2 <input type="text" id="mat2" size="150" value="{&quot;matrixType&quot;:&quot;ColumnVector&quot;, &quot;data&quot;: [[1], [2], [3],[4]], &quot;size&quot;: [4, 1]}" /></p>
    <input type="button" id="send" value="Find the dot product" />
    <p id="Product"></p>

    <!--Script references -->
    <!--Reference the jQuery library. -->
    <script src="Scripts/jquery-1.6.4.min.js"></script>
    <!--Reference the SignalR library. -->
    <script src="Scripts/jquery.signalR-2.2.0.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="signalr/hubs"></script>

    <!--Add script to communicate with the server and update the page. -->
    <script type="text/javascript">
        $(function () {
            // Declare a proxy to reference the hub.
            var blas1 = $.connection.bLAS1;

            // Start the connection.
            $.connection.hub.start().done(function () {
                $('#send').click(function () {

                    var mat1JSON = $('#mat1').val();
                    var mat2JSON = $('#mat2').val();

                    // Call the matrix multiplication method on the hub.
                    blas1.server.dot(mat1JSON, mat2JSON);
                });
            });

            // Create a function that the hub can call to display the product.
            blas1.client.displayProduct = function (product) {

                //Parse JSON using JSON.parse  http://www.w3schools.com/json/json_eval.asp
                var productObj = JSON.parse(product);

                //Display the product in Javascript multidimensional array format
                /*var numRows = productObj.data.length;
                var displayProduct = '[';
                for (i = 0; i < numRows; i++){
                    displayProduct += '[' + productObj.data[i] + ']';
                    if (i != numRows - 1) {
                        displayProduct += ','
                    } else displayProduct += ']'
                }
                document.getElementById("matrixProduct").innerHTML = 'The product matrix is ' + displayProduct;
                */

                document.getElementById("Product").innerHTML = 'The dot product is ' + productObj;
            };
        });
    </script>
</body>
</html>

